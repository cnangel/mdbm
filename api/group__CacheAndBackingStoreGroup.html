<html lang="en">
<head>
<title>MDBM</title>
<link rel="stylesheet" href="style.css" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Cache and Backing Store Group</div>  </div>
</div><!--header-->
<div class="contents">

<p>The Cache and Backing Store Group contain the API for configuring caches and backing stores.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdbm__bsops.html">mdbm_bsops</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga834ee0d5d70a26e0ce73f79bd1af6297"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga834ee0d5d70a26e0ce73f79bd1af6297">MDBM_CACHEMODE_NONE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga834ee0d5d70a26e0ce73f79bd1af6297"><td class="mdescLeft">&#160;</td><td class="mdescRight">No caching behavior.  <a href="#ga834ee0d5d70a26e0ce73f79bd1af6297">More...</a><br/></td></tr>
<tr class="separator:ga834ee0d5d70a26e0ce73f79bd1af6297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0ef13a7623a152a2f98c40cc33935d8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#gad0ef13a7623a152a2f98c40cc33935d8">MDBM_CACHEMODE_LFU</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gad0ef13a7623a152a2f98c40cc33935d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry with smallest number of accesses is evicted.  <a href="#gad0ef13a7623a152a2f98c40cc33935d8">More...</a><br/></td></tr>
<tr class="separator:gad0ef13a7623a152a2f98c40cc33935d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1afbf8fb63dd96bfe5efa17df6e5ca1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#gae1afbf8fb63dd96bfe5efa17df6e5ca1">MDBM_CACHEMODE_LRU</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:gae1afbf8fb63dd96bfe5efa17df6e5ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry with oldest access time is evicted.  <a href="#gae1afbf8fb63dd96bfe5efa17df6e5ca1">More...</a><br/></td></tr>
<tr class="separator:gae1afbf8fb63dd96bfe5efa17df6e5ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96ea711f6ee1bac77334d3eed1dbe77e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga96ea711f6ee1bac77334d3eed1dbe77e">MDBM_CACHEMODE_GDSF</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:ga96ea711f6ee1bac77334d3eed1dbe77e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Greedy dual-size frequency (size and frequency) eviction.  <a href="#ga96ea711f6ee1bac77334d3eed1dbe77e">More...</a><br/></td></tr>
<tr class="separator:ga96ea711f6ee1bac77334d3eed1dbe77e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab96045fde016fdbf7fb97b874cc340db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#gab96045fde016fdbf7fb97b874cc340db">MDBM_CACHEMODE_MAX</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:gab96045fde016fdbf7fb97b874cc340db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum cache mode value.  <a href="#gab96045fde016fdbf7fb97b874cc340db">More...</a><br/></td></tr>
<tr class="separator:gab96045fde016fdbf7fb97b874cc340db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e39c53bd7124272842e8bf298b997a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga7e39c53bd7124272842e8bf298b997a3">MDBM_CACHEMODE_EVICT_CLEAN_FIRST</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="memdesc:ga7e39c53bd7124272842e8bf298b997a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">add to cachemode to evict clean items 1st  <a href="#ga7e39c53bd7124272842e8bf298b997a3">More...</a><br/></td></tr>
<tr class="separator:ga7e39c53bd7124272842e8bf298b997a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bd5c162e19afe6ded9f18c88bfa7278"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga2bd5c162e19afe6ded9f18c88bfa7278">MDBM_CACHEMODE</a>(m)&#160;&#160;&#160;((m)&amp;3)</td></tr>
<tr class="memdesc:ga2bd5c162e19afe6ded9f18c88bfa7278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts cache mode.  <a href="#ga2bd5c162e19afe6ded9f18c88bfa7278">More...</a><br/></td></tr>
<tr class="separator:ga2bd5c162e19afe6ded9f18c88bfa7278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85e81a80edcce6db923a7b5447d607af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga85e81a80edcce6db923a7b5447d607af">MDBM_CACHEMODE_BITS</a>&#160;&#160;&#160;(3 | <a class="el" href="group__CacheAndBackingStoreGroup.html#ga7e39c53bd7124272842e8bf298b997a3">MDBM_CACHEMODE_EVICT_CLEAN_FIRST</a>)</td></tr>
<tr class="memdesc:ga85e81a80edcce6db923a7b5447d607af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines a mask for the cache mode, including control (eviction) bit.  <a href="#ga85e81a80edcce6db923a7b5447d607af">More...</a><br/></td></tr>
<tr class="separator:ga85e81a80edcce6db923a7b5447d607af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67094314b48b56d0306f0b3e91c9dffc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga67094314b48b56d0306f0b3e91c9dffc">MDBM_BSOPS_FILE</a>&#160;&#160;&#160;((const <a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a>*)-1)</td></tr>
<tr class="memdesc:ga67094314b48b56d0306f0b3e91c9dffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backing store File identifier.  <a href="#ga67094314b48b56d0306f0b3e91c9dffc">More...</a><br/></td></tr>
<tr class="separator:ga67094314b48b56d0306f0b3e91c9dffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26dff6b95b253f352b1ab1e18fb763e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga26dff6b95b253f352b1ab1e18fb763e5">MDBM_BSOPS_MDBM</a>&#160;&#160;&#160;((const <a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a>*)-2)</td></tr>
<tr class="memdesc:ga26dff6b95b253f352b1ab1e18fb763e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backing store MDBM identifier.  <a href="#ga26dff6b95b253f352b1ab1e18fb763e5">More...</a><br/></td></tr>
<tr class="separator:ga26dff6b95b253f352b1ab1e18fb763e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gae9b70b4a03d71cdb7625241a4d395302"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmdbm__bsops.html">mdbm_bsops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a></td></tr>
<tr class="separator:gae9b70b4a03d71cdb7625241a4d395302"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2db305e8a4d47c50f82f6803c818904a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga2db305e8a4d47c50f82f6803c818904a">mdbm_set_cachemode</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, int cachemode)</td></tr>
<tr class="memdesc:ga2db305e8a4d47c50f82f6803c818904a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the database as a cache.  <a href="#ga2db305e8a4d47c50f82f6803c818904a">More...</a><br/></td></tr>
<tr class="separator:ga2db305e8a4d47c50f82f6803c818904a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga573b86063df2dbd6f5b3a0f92468f4a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga573b86063df2dbd6f5b3a0f92468f4a9">mdbm_get_cachemode</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db)</td></tr>
<tr class="memdesc:ga573b86063df2dbd6f5b3a0f92468f4a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current cache style of the database.  <a href="#ga573b86063df2dbd6f5b3a0f92468f4a9">More...</a><br/></td></tr>
<tr class="separator:ga573b86063df2dbd6f5b3a0f92468f4a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69e123b551f8559dbeb0fef2a9a264d6"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga69e123b551f8559dbeb0fef2a9a264d6">mdbm_get_cachemode_name</a> (int cachemode)</td></tr>
<tr class="memdesc:ga69e123b551f8559dbeb0fef2a9a264d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the cache mode as a string.  <a href="#ga69e123b551f8559dbeb0fef2a9a264d6">More...</a><br/></td></tr>
<tr class="separator:ga69e123b551f8559dbeb0fef2a9a264d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4010b418d3f3952068ce851ea8ea6c7e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CacheAndBackingStoreGroup.html#ga4010b418d3f3952068ce851ea8ea6c7e">mdbm_set_backingstore</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *cachedb, const <a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a> *bsops, void *opt, int flags)</td></tr>
<tr class="memdesc:ga4010b418d3f3952068ce851ea8ea6c7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The backing-store support controls the in-memory cache as a read-through, write-through cache.  <a href="#ga4010b418d3f3952068ce851ea8ea6c7e">More...</a><br/></td></tr>
<tr class="separator:ga4010b418d3f3952068ce851ea8ea6c7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Cache and Backing Store Group contain the API for configuring caches and backing stores. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga834ee0d5d70a26e0ce73f79bd1af6297"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE_NONE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>No caching behavior. </p>

</div>
</div>
<a class="anchor" id="gad0ef13a7623a152a2f98c40cc33935d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE_LFU&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry with smallest number of accesses is evicted. </p>

</div>
</div>
<a class="anchor" id="gae1afbf8fb63dd96bfe5efa17df6e5ca1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE_LRU&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry with oldest access time is evicted. </p>

</div>
</div>
<a class="anchor" id="ga96ea711f6ee1bac77334d3eed1dbe77e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE_GDSF&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Greedy dual-size frequency (size and frequency) eviction. </p>

</div>
</div>
<a class="anchor" id="gab96045fde016fdbf7fb97b874cc340db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE_MAX&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum cache mode value. </p>

</div>
</div>
<a class="anchor" id="ga7e39c53bd7124272842e8bf298b997a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE_EVICT_CLEAN_FIRST&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>add to cachemode to evict clean items 1st </p>

</div>
</div>
<a class="anchor" id="ga2bd5c162e19afe6ded9f18c88bfa7278"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">m</td><td>)</td>
          <td>&#160;&#160;&#160;((m)&amp;3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extracts cache mode. </p>

</div>
</div>
<a class="anchor" id="ga85e81a80edcce6db923a7b5447d607af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHEMODE_BITS&#160;&#160;&#160;(3 | <a class="el" href="group__CacheAndBackingStoreGroup.html#ga7e39c53bd7124272842e8bf298b997a3">MDBM_CACHEMODE_EVICT_CLEAN_FIRST</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines a mask for the cache mode, including control (eviction) bit. </p>

</div>
</div>
<a class="anchor" id="ga67094314b48b56d0306f0b3e91c9dffc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_BSOPS_FILE&#160;&#160;&#160;((const <a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a>*)-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Backing store File identifier. </p>

</div>
</div>
<a class="anchor" id="ga26dff6b95b253f352b1ab1e18fb763e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_BSOPS_MDBM&#160;&#160;&#160;((const <a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a>*)-2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Backing store MDBM identifier. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gae9b70b4a03d71cdb7625241a4d395302"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmdbm__bsops.html">mdbm_bsops</a>  <a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga2db305e8a4d47c50f82f6803c818904a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_set_cachemode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cachemode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Manage the database as a cache. </p>
<p>mdbm_set_cachemode must be called before data is inserted. Tracking metadata is stored with each entry which allows MDBM to do cache eviction via LRU, LFU, and GDSF (greedy-dual-size-frequency). MDBM also supports clean/dirty tracking and the application can supply a callback (see <a class="el" href="group__CacheAndBackingStoreGroup.html#ga4010b418d3f3952068ce851ea8ea6c7e">mdbm_set_backingstore</a>) which is called by MDBM when a dirty entry is about to be evicted allowing the application to sync the entry to a backing store or perform some other type of "clean" operation.</p>
<p>NOTE: V3 API</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cachemode</td><td>caching mode value (below) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Set cache mode status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, with errno set.<ul>
<li>ENOSYS: wrong MDBM version</li>
<li>EINVAL: bad <em>cachemode</em> value, or empty MDBM</li>
<li>other: for locking errors </li>
</ul>
</td></tr>
    <tr><td class="paramname">0</td><td>Success</td></tr>
  </table>
  </dd>
</dl>
<p>Values for <em>cachemode:</em> </p>
<ul>
<li>MDBM_CACHEMODE_NONE - no cache mode</li>
<li>MDBM_CACHEMODE_LFU - least frequently used</li>
<li>MDBM_CACHEMODE_LRU - least recently used</li>
<li>MDBM_CACHEMODE_GDSF - greedy dual-size frequency </li>
</ul>

</div>
</div>
<a class="anchor" id="ga573b86063df2dbd6f5b3a0f92468f4a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_get_cachemode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current cache style of the database. </p>
<p>See the cachemode parameter in <a class="el" href="group__CacheAndBackingStoreGroup.html#ga2db305e8a4d47c50f82f6803c818904a">mdbm_set_cachemode</a> for the valid values.</p>
<p>NOTE: V3 API</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Current cache mode </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>error, with errno set.<ul>
<li>ENOSYS: wrong MDBM version </li>
</ul>
</td></tr>
    <tr><td class="paramname">MDBM_CACHEMODE_NONE</td><td></td></tr>
    <tr><td class="paramname">MDBM_CACHEMODE_LFU</td><td></td></tr>
    <tr><td class="paramname">MDBM_CACHEMODE_LRU</td><td></td></tr>
    <tr><td class="paramname">MDBM_CACHEMODE_GDSF</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga69e123b551f8559dbeb0fef2a9a264d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* mdbm_get_cachemode_name </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cachemode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the cache mode as a string. </p>
<p>See <a class="el" href="group__CacheAndBackingStoreGroup.html#ga2db305e8a4d47c50f82f6803c818904a">mdbm_set_cachemode</a></p>
<p>NOTE: V3 API</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cachemode</td><td>Cache mode type (below) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Printable string representing a valid cache mode, otherwise the string "unknown"</dd></dl>
<p>Values for <em>cachemode:</em> </p>
<ul>
<li>MDBM_CACHEMODE_NONE - no cache mode</li>
<li>MDBM_CACHEMODE_LFU - least frequently used</li>
<li>MDBM_CACHEMODE_LRU - least recently used</li>
<li>MDBM_CACHEMODE_GDSF - greedy dual-size frequency </li>
</ul>

</div>
</div>
<a class="anchor" id="ga4010b418d3f3952068ce851ea8ea6c7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_set_backingstore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>cachedb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__CacheAndBackingStoreGroup.html#gae9b70b4a03d71cdb7625241a4d395302">mdbm_bsops_t</a> *&#160;</td>
          <td class="paramname"><em>bsops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The backing-store support controls the in-memory cache as a read-through, write-through cache. </p>
<p>The backing-store interface uses a plugin model where each plugin supplies lock, unlock, fetch, store, and delete functions. Two predefined plugins are available: file-based(MDBM_BSOPS_FILE) and MDBM-based (MDBM_BSOPS_MDBM). Typically, a window will be set to access the backing store via <a class="el" href="group__ConfigurationGroup.html#ga752b65780a07990c0f7d58c0bdef13dd">mdbm_set_window_size</a> since the backing store may be very large. Please refer to <a class="el" href="group__ConfigurationGroup.html#ga752b65780a07990c0f7d58c0bdef13dd">mdbm_set_window_size</a> for window size restrictions.</p>
<p>An <a class="el" href="group__RecordAccessGroup.html#ga5107f4235ad6ac1d9d4e73837f41a200">mdbm_store</a> on <em>cachedb</em> must be used to update data in the backing store. An in-place update (fetching the data address using <a class="el" href="group__RecordAccessGroup.html#ga2f22e356fdbd7e77271fb3c38ff2fe84">mdbm_fetch</a> and directly modifying the data within the mapped db) will not get written through to the backing store.</p>
<p>Once backing store is set on the opened cache, it cannot be removed from the open cache.</p>
<p>If you use MDBM_BSOPS_MDBM to set an MDBM backing store, the <em>cachedb</em> will <em>own</em> the MDBM handle of the backing store, and <em>cachedb</em> will close it when the cache MDBM handle is closed. You should not make any MDBM calls directly using the backing store MDBM handle after passing it to mdbm_set_backingstore.</p>
<p>NOTE: V3 API</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cachedb</td><td>Database handle (for the cache database) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bsops</td><td>Can be MDBM_BSOPS_FILE, MDBM_BSOPS_MDBM, or user-supplied functions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opt</td><td>Depends on the bsops parameter. (ex., for MDBM_BSOPS_FILE <em>opt</em> should be a file path, or for MDBM_BSOPS_MDBM <em>opt</em> should be an MDBM database handle (opened with MDBM_OPEN_WINDOWED flag)) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Depends on the <em>bsops</em>. Specify 0 if <em>bsops</em> is MDBM_BSOPS_MDBM. Specify O_DIRECT to prevent paging out important data when the bsops is MDBM_BSOPS_FILE. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Set backingstore status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- doc footer -->
</body>
</html>
