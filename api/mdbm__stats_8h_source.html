<html lang="en">
<head>
<title>MDBM</title>
<link rel="stylesheet" href="style.css" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mdbm_stats.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mdbm__stats_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright 2013 Yahoo! Inc.                                         */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/* See LICENSE in the root of the distribution for licensing details. */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#ifndef __MDBM3_STATS_H_</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define __MDBM3_STATS_H_</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="mdbm_8h.html">mdbm.h</a>&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#ifdef  __cplusplus</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="code" href="mdbm__stats_8h.html#ab44c9838a8bc8d5a2305c3a9732c29c1">   15</a></span>&#160;<span class="preprocessor">#define MDBM_RSTATS_VERSION     0x53090004</span></div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="code" href="mdbm__stats_8h.html#a4492ccce943b5ff10172424bbc02401a">   16</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define MDBM_RSTATS_THIST_MAX (6*9+2)</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="code" href="structmdbm__rstats__val.html">   18</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val</a> {</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="code" href="structmdbm__rstats__val.html#afb223d77a35839f5654ef6910548d1c1">   19</a></span>&#160;    uint64_t    <a class="code" href="structmdbm__rstats__val.html#afb223d77a35839f5654ef6910548d1c1">num</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="code" href="structmdbm__rstats__val.html#a41f31326fd0e1b6ed23fa158b73ffa59">   20</a></span>&#160;    uint64_t    <a class="code" href="structmdbm__rstats__val.html#a41f31326fd0e1b6ed23fa158b73ffa59">num_error</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="code" href="structmdbm__rstats__val.html#ad512f980b6120ec996b27959450b6ec6">   21</a></span>&#160;    uint64_t    <a class="code" href="structmdbm__rstats__val.html#ad512f980b6120ec996b27959450b6ec6">sum_usec</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="code" href="structmdbm__rstats__val.html#af5844a612b356d96e827b3a2ea202de5">   22</a></span>&#160;    uint64_t    <a class="code" href="structmdbm__rstats__val.html#af5844a612b356d96e827b3a2ea202de5">num_lock_wait</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="code" href="structmdbm__rstats__val.html#a6cfbc82a28e608379b9c639267fc6b72">   23</a></span>&#160;    uint64_t    <a class="code" href="structmdbm__rstats__val.html#a6cfbc82a28e608379b9c639267fc6b72">sum_lock_wait_usec</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="code" href="structmdbm__rstats__val.html#a7e37155ffd067183cce5ef343b50bc5f">   25</a></span>&#160;    uint64_t    <a class="code" href="structmdbm__rstats__val.html#a7e37155ffd067183cce5ef343b50bc5f">thist</a>[<a class="code" href="mdbm__stats_8h.html#a4492ccce943b5ff10172424bbc02401a">MDBM_RSTATS_THIST_MAX</a>];</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;};</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="code" href="mdbm__stats_8h.html#ad918336ed012cf6cba3d0e9dd9e42502">   27</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val</a> <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html">   29</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmdbm__rstats.html">mdbm_rstats</a> {</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#ab25e7b78f05199228255260b5f881194">   30</a></span>&#160;    uint32_t    <a class="code" href="structmdbm__rstats.html#ab25e7b78f05199228255260b5f881194">version</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#af1fc3224c57e32a6123d250e380edba4">   31</a></span>&#160;    uint16_t    <a class="code" href="structmdbm__rstats.html#af1fc3224c57e32a6123d250e380edba4">flags</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#a70bd1b4a5ac18837a0c48237039ea8a6">   32</a></span>&#160;    uint16_t    <a class="code" href="structmdbm__rstats.html#a70bd1b4a5ac18837a0c48237039ea8a6">reserved0</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#a6bfde6db9ea7f3949e8cffb37495b181">   34</a></span>&#160;    uint32_t    <a class="code" href="structmdbm__rstats.html#a6bfde6db9ea7f3949e8cffb37495b181">lock</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#ae07de8549fce2870aa2383d1c4e23035">   35</a></span>&#160;    uint32_t    <a class="code" href="structmdbm__rstats.html#ae07de8549fce2870aa2383d1c4e23035">reserved1</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#adc43189284fb8b0eb515e1f12ecbae47">   37</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <a class="code" href="structmdbm__rstats.html#adc43189284fb8b0eb515e1f12ecbae47">fetch</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#af06c445a50ffacf47e52ab9176270a34">   38</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <a class="code" href="structmdbm__rstats.html#af06c445a50ffacf47e52ab9176270a34">fetch_uncached</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#a06d9958f4ba7a109fbc48d2657279577">   39</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <a class="code" href="structmdbm__rstats.html#a06d9958f4ba7a109fbc48d2657279577">store</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#a952946d6b3adb55e4e878dae9c96c738">   40</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <span class="keyword">remove</span>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#a3fe85af2f5b941245df033356695c756">   42</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <a class="code" href="structmdbm__rstats.html#a3fe85af2f5b941245df033356695c756">getpage</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#a76abda362a43ed03186fed96288e8d71">   43</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <a class="code" href="structmdbm__rstats.html#a76abda362a43ed03186fed96288e8d71">getpage_uncached</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#ae93639e82292e82775aabe4027cb33fd">   44</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <a class="code" href="structmdbm__rstats.html#ae93639e82292e82775aabe4027cb33fd">cache_evict</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="code" href="structmdbm__rstats.html#ad547f0d6b666be6b102816e9e4e02bf7">   45</a></span>&#160;    <a class="code" href="structmdbm__rstats__val.html">mdbm_rstats_val_t</a>   <a class="code" href="structmdbm__rstats.html#ad547f0d6b666be6b102816e9e4e02bf7">cache_store</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;};</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="code" href="mdbm__stats_8h.html#ae743b6c28a841540ecf1346571bd3eba">   47</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmdbm__rstats.html">mdbm_rstats</a> <a class="code" href="structmdbm__rstats.html">mdbm_rstats_t</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="code" href="mdbm__stats_8h.html#a97e25602061dfa46773ed978e38210af">   49</a></span>&#160;<span class="preprocessor">#define MDBM_RSTATS_THIST       0x01</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">struct </span>mdbm_rstats_mem;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mdbm__stats_8h.html#a43a9ec68b75ecd81fec3b91bb9f865c1">mdbm_reset_rstats</a> (<span class="keyword">struct</span> <a class="code" href="structmdbm__rstats.html">mdbm_rstats</a>* rs);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mdbm__stats_8h.html#a4169fa7a46b7e33b51befb0b428a78bc">mdbm_init_rstats</a> (<a class="code" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a>* db, <span class="keywordtype">int</span> flags);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mdbm__stats_8h.html#a6f7147582990669e543c816521ca4b80">mdbm_open_rstats</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* dbfilename, <span class="keywordtype">int</span> flags,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                      <span class="keyword">struct</span> mdbm_rstats_mem** mem, <span class="keyword">struct</span> <a class="code" href="structmdbm__rstats.html">mdbm_rstats</a>** rstats);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keywordtype">int</span> <a class="code" href="mdbm__stats_8h.html#a5e7791cdad0f81e04e42708a0a43286f">mdbm_close_rstats</a> (<span class="keyword">struct</span> mdbm_rstats_mem* mem);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mdbm__stats_8h.html#a0c10ab29a4997d9037926c90cdb88536">mdbm_diff_rstats</a> (<a class="code" href="structmdbm__rstats.html">mdbm_rstats_t</a>* base, <a class="code" href="structmdbm__rstats.html">mdbm_rstats_t</a>* sample, <a class="code" href="structmdbm__rstats.html">mdbm_rstats_t</a>* diff,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                       <a class="code" href="structmdbm__rstats.html">mdbm_rstats_t</a>* new_base);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#ifdef  __cplusplus</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* __MDBM3_STATS_H_ */</span><span class="preprocessor"></span></div>
</div><!-- fragment --></div><!-- contents -->
<!-- doc footer -->
</body>
</html>
