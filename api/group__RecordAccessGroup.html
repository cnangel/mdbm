<html lang="en">
<head>
<title>MDBM</title>
<link rel="stylesheet" href="style.css" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Record Access Group</div>  </div>
</div><!--header-->
<div class="contents">

<p>The Record Access Group contains the API for fetching, storing, and deleting records.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdbm__fetch__info.html">mdbm_fetch_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga31173b0495bcb6acc66ab2a1e43616f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga31173b0495bcb6acc66ab2a1e43616f5">MDBM_FETCH_FLAG_DIRTY</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:ga31173b0495bcb6acc66ab2a1e43616f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cache entry is dirty.  <a href="#ga31173b0495bcb6acc66ab2a1e43616f5">More...</a><br/></td></tr>
<tr class="separator:ga31173b0495bcb6acc66ab2a1e43616f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa40c240656bca4b02cb897f09494619a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#gaa40c240656bca4b02cb897f09494619a">MDBM_INSERT</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gaa40c240656bca4b02cb897f09494619a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert if key does not exist; fail if exists.  <a href="#gaa40c240656bca4b02cb897f09494619a">More...</a><br/></td></tr>
<tr class="separator:gaa40c240656bca4b02cb897f09494619a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga541b4839edfc246a118d80052b056975"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga541b4839edfc246a118d80052b056975">MDBM_REPLACE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga541b4839edfc246a118d80052b056975"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update if key exists; insert if does not exist.  <a href="#ga541b4839edfc246a118d80052b056975">More...</a><br/></td></tr>
<tr class="separator:ga541b4839edfc246a118d80052b056975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b8b0b78c6358dd7e7f431e26d9b5491"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga9b8b0b78c6358dd7e7f431e26d9b5491">MDBM_INSERT_DUP</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga9b8b0b78c6358dd7e7f431e26d9b5491"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert new record (creates duplicate if key exists)  <a href="#ga9b8b0b78c6358dd7e7f431e26d9b5491">More...</a><br/></td></tr>
<tr class="separator:ga9b8b0b78c6358dd7e7f431e26d9b5491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga246a50063f1a2b6509d4b4ae3f3a94ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga246a50063f1a2b6509d4b4ae3f3a94ec">MDBM_MODIFY</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:ga246a50063f1a2b6509d4b4ae3f3a94ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update if key exists; fail if does not exist.  <a href="#ga246a50063f1a2b6509d4b4ae3f3a94ec">More...</a><br/></td></tr>
<tr class="separator:ga246a50063f1a2b6509d4b4ae3f3a94ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8c2983be7421191004c22445b5fb1cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#gaf8c2983be7421191004c22445b5fb1cc">MDBM_STORE_MASK</a>&#160;&#160;&#160;0x3</td></tr>
<tr class="memdesc:gaf8c2983be7421191004c22445b5fb1cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mask for all store options.  <a href="#gaf8c2983be7421191004c22445b5fb1cc">More...</a><br/></td></tr>
<tr class="separator:gaf8c2983be7421191004c22445b5fb1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42db2fee050cf2f3534362b9f190ae2c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga42db2fee050cf2f3534362b9f190ae2c">MDBM_STORE_MODE</a>(f)&#160;&#160;&#160;((f) &amp; <a class="el" href="group__RecordAccessGroup.html#gaf8c2983be7421191004c22445b5fb1cc">MDBM_STORE_MASK</a>)</td></tr>
<tr class="memdesc:ga42db2fee050cf2f3534362b9f190ae2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the store mode from an options mask.  <a href="#ga42db2fee050cf2f3534362b9f190ae2c">More...</a><br/></td></tr>
<tr class="separator:ga42db2fee050cf2f3534362b9f190ae2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45c43e56996a24581276b3ccd04afa3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga45c43e56996a24581276b3ccd04afa3f">MDBM_RESERVE</a>&#160;&#160;&#160;0x100</td></tr>
<tr class="memdesc:ga45c43e56996a24581276b3ccd04afa3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserve space; Value not copied.  <a href="#ga45c43e56996a24581276b3ccd04afa3f">More...</a><br/></td></tr>
<tr class="separator:ga45c43e56996a24581276b3ccd04afa3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88181836324e58ea8e66f66b1800a26d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga88181836324e58ea8e66f66b1800a26d">MDBM_CLEAN</a>&#160;&#160;&#160;0x200</td></tr>
<tr class="memdesc:ga88181836324e58ea8e66f66b1800a26d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark entry as clean.  <a href="#ga88181836324e58ea8e66f66b1800a26d">More...</a><br/></td></tr>
<tr class="separator:ga88181836324e58ea8e66f66b1800a26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38f009e54b07c97f3a38902682416a5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga38f009e54b07c97f3a38902682416a5d">MDBM_CACHE_ONLY</a>&#160;&#160;&#160;0x400</td></tr>
<tr class="memdesc:ga38f009e54b07c97f3a38902682416a5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do not operate on the backing store; use cache only.  <a href="#ga38f009e54b07c97f3a38902682416a5d">More...</a><br/></td></tr>
<tr class="separator:ga38f009e54b07c97f3a38902682416a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17788287d9b110766368927d4a051ce4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga17788287d9b110766368927d4a051ce4">MDBM_CACHE_REPLACE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga17788287d9b110766368927d4a051ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update cache if key exists; insert if does not exist.  <a href="#ga17788287d9b110766368927d4a051ce4">More...</a><br/></td></tr>
<tr class="separator:ga17788287d9b110766368927d4a051ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa52b217cfc373e97859f3d10e4f12e88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#gaa52b217cfc373e97859f3d10e4f12e88">MDBM_CACHE_MODIFY</a>&#160;&#160;&#160;0x1000</td></tr>
<tr class="memdesc:gaa52b217cfc373e97859f3d10e4f12e88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update cache if key exists; do not insert if does not.  <a href="#gaa52b217cfc373e97859f3d10e4f12e88">More...</a><br/></td></tr>
<tr class="separator:gaa52b217cfc373e97859f3d10e4f12e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26888c761d8635099b66a2ca4f6ee8f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga26888c761d8635099b66a2ca4f6ee8f3">MDBM_CACHE_UPDATE_MODE</a>(f)&#160;&#160;&#160;((f) &amp; <a class="el" href="group__RecordAccessGroup.html#gaa52b217cfc373e97859f3d10e4f12e88">MDBM_CACHE_MODIFY</a>)</td></tr>
<tr class="separator:ga26888c761d8635099b66a2ca4f6ee8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac793b2f495b3111f3119cafb0ad5cd2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#gac793b2f495b3111f3119cafb0ad5cd2b">MDBM_STORE_SUCCESS</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gac793b2f495b3111f3119cafb0ad5cd2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returned if store succeeds.  <a href="#gac793b2f495b3111f3119cafb0ad5cd2b">More...</a><br/></td></tr>
<tr class="separator:gac793b2f495b3111f3119cafb0ad5cd2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8948d851ca085369eaf03d4ff0fd163f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga8948d851ca085369eaf03d4ff0fd163f">MDBM_STORE_ENTRY_EXISTS</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga8948d851ca085369eaf03d4ff0fd163f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returned if MDBM_INSERT used and key exists.  <a href="#ga8948d851ca085369eaf03d4ff0fd163f">More...</a><br/></td></tr>
<tr class="separator:ga8948d851ca085369eaf03d4ff0fd163f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2f22e356fdbd7e77271fb3c38ff2fe84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdatum.html">datum</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga2f22e356fdbd7e77271fb3c38ff2fe84">mdbm_fetch</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> key)</td></tr>
<tr class="memdesc:ga2f22e356fdbd7e77271fb3c38ff2fe84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the record specified by the <em>key</em> argument and returns a <em>datum</em> that <b>points</b> to the value.  <a href="#ga2f22e356fdbd7e77271fb3c38ff2fe84">More...</a><br/></td></tr>
<tr class="separator:ga2f22e356fdbd7e77271fb3c38ff2fe84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54e09664a3befe2b298a5adc1d5fa188"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga54e09664a3befe2b298a5adc1d5fa188">mdbm_fetch_r</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> *key, <a class="el" href="structdatum.html">datum</a> *val, <a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *iter)</td></tr>
<tr class="memdesc:ga54e09664a3befe2b298a5adc1d5fa188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the record specified by the <em>key</em> argument.  <a href="#ga54e09664a3befe2b298a5adc1d5fa188">More...</a><br/></td></tr>
<tr class="separator:ga54e09664a3befe2b298a5adc1d5fa188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45eadc48fed427ebcd0700539d819cea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga45eadc48fed427ebcd0700539d819cea">mdbm_fetch_buf</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> *key, <a class="el" href="structdatum.html">datum</a> *val, <a class="el" href="structdatum.html">datum</a> *buf, int flags)</td></tr>
<tr class="memdesc:ga45eadc48fed427ebcd0700539d819cea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches and copies the record specified by the <em>key</em> argument.  <a href="#ga45eadc48fed427ebcd0700539d819cea">More...</a><br/></td></tr>
<tr class="separator:ga45eadc48fed427ebcd0700539d819cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga910f1482d0d119abc810735fc7b4da64"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga910f1482d0d119abc810735fc7b4da64">mdbm_fetch_dup_r</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> *key, <a class="el" href="structdatum.html">datum</a> *val, <a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *iter)</td></tr>
<tr class="memdesc:ga910f1482d0d119abc810735fc7b4da64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the next value for a key inserted via <a class="el" href="group__RecordAccessGroup.html#gac514b009493068b894465480cb81faea">mdbm_store_r</a> with the MDBM_INSERT_DUP flag set.  <a href="#ga910f1482d0d119abc810735fc7b4da64">More...</a><br/></td></tr>
<tr class="separator:ga910f1482d0d119abc810735fc7b4da64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga112e98430cf64402c17d6cd8463643e2"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga112e98430cf64402c17d6cd8463643e2">mdbm_fetch_str</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, const char *key)</td></tr>
<tr class="memdesc:ga112e98430cf64402c17d6cd8463643e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches a string.  <a href="#ga112e98430cf64402c17d6cd8463643e2">More...</a><br/></td></tr>
<tr class="separator:ga112e98430cf64402c17d6cd8463643e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1519e82260a884cab27f475e6f292a7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga1519e82260a884cab27f475e6f292a7a">mdbm_fetch_info</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> *key, <a class="el" href="structdatum.html">datum</a> *val, <a class="el" href="structdatum.html">datum</a> *buf, struct <a class="el" href="structmdbm__fetch__info.html">mdbm_fetch_info</a> *info, <a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *iter)</td></tr>
<tr class="memdesc:ga1519e82260a884cab27f475e6f292a7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches and copies the record specified by the <em>key</em> argument.  <a href="#ga1519e82260a884cab27f475e6f292a7a">More...</a><br/></td></tr>
<tr class="separator:ga1519e82260a884cab27f475e6f292a7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga002dad258e05c01136dbabb9e1120790"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga002dad258e05c01136dbabb9e1120790">mdbm_delete</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> key)</td></tr>
<tr class="memdesc:ga002dad258e05c01136dbabb9e1120790"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a specific record.  <a href="#ga002dad258e05c01136dbabb9e1120790">More...</a><br/></td></tr>
<tr class="separator:ga002dad258e05c01136dbabb9e1120790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02b1b289ec41fc7c5a1993be85aebf57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga02b1b289ec41fc7c5a1993be85aebf57">mdbm_delete_r</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *iter)</td></tr>
<tr class="memdesc:ga02b1b289ec41fc7c5a1993be85aebf57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the record currently addressed by the <em>iter</em> argument.  <a href="#ga02b1b289ec41fc7c5a1993be85aebf57">More...</a><br/></td></tr>
<tr class="separator:ga02b1b289ec41fc7c5a1993be85aebf57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03a6d4c4ffb314cf5e7dfbf4eb3c67e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga03a6d4c4ffb314cf5e7dfbf4eb3c67e8">mdbm_delete_str</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, const char *key)</td></tr>
<tr class="memdesc:ga03a6d4c4ffb314cf5e7dfbf4eb3c67e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a string from the MDBM.  <a href="#ga03a6d4c4ffb314cf5e7dfbf4eb3c67e8">More...</a><br/></td></tr>
<tr class="separator:ga03a6d4c4ffb314cf5e7dfbf4eb3c67e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5107f4235ad6ac1d9d4e73837f41a200"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga5107f4235ad6ac1d9d4e73837f41a200">mdbm_store</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> key, <a class="el" href="structdatum.html">datum</a> val, int flags)</td></tr>
<tr class="memdesc:ga5107f4235ad6ac1d9d4e73837f41a200"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a wrapper around <a class="el" href="group__RecordAccessGroup.html#gac514b009493068b894465480cb81faea">mdbm_store_r</a>, with a static iterator.  <a href="#ga5107f4235ad6ac1d9d4e73837f41a200">More...</a><br/></td></tr>
<tr class="separator:ga5107f4235ad6ac1d9d4e73837f41a200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac514b009493068b894465480cb81faea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#gac514b009493068b894465480cb81faea">mdbm_store_r</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, <a class="el" href="structdatum.html">datum</a> *key, <a class="el" href="structdatum.html">datum</a> *val, int flags, <a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *iter)</td></tr>
<tr class="memdesc:gac514b009493068b894465480cb81faea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the record specified by the <em>key</em> and <em>val</em> parameters.  <a href="#gac514b009493068b894465480cb81faea">More...</a><br/></td></tr>
<tr class="separator:gac514b009493068b894465480cb81faea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32183f91301d03fab89a170e85538ce4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__RecordAccessGroup.html#ga32183f91301d03fab89a170e85538ce4">mdbm_store_str</a> (<a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *db, const char *key, const char *val, int flags)</td></tr>
<tr class="memdesc:ga32183f91301d03fab89a170e85538ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a string into the MDBM.  <a href="#ga32183f91301d03fab89a170e85538ce4">More...</a><br/></td></tr>
<tr class="separator:ga32183f91301d03fab89a170e85538ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Record Access Group contains the API for fetching, storing, and deleting records. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga31173b0495bcb6acc66ab2a1e43616f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_FETCH_FLAG_DIRTY&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cache entry is dirty. </p>

</div>
</div>
<a class="anchor" id="gaa40c240656bca4b02cb897f09494619a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_INSERT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert if key does not exist; fail if exists. </p>

</div>
</div>
<a class="anchor" id="ga541b4839edfc246a118d80052b056975"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_REPLACE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update if key exists; insert if does not exist. </p>

</div>
</div>
<a class="anchor" id="ga9b8b0b78c6358dd7e7f431e26d9b5491"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_INSERT_DUP&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert new record (creates duplicate if key exists) </p>

</div>
</div>
<a class="anchor" id="ga246a50063f1a2b6509d4b4ae3f3a94ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_MODIFY&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update if key exists; fail if does not exist. </p>

</div>
</div>
<a class="anchor" id="gaf8c2983be7421191004c22445b5fb1cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_STORE_MASK&#160;&#160;&#160;0x3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mask for all store options. </p>

</div>
</div>
<a class="anchor" id="ga42db2fee050cf2f3534362b9f190ae2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_STORE_MODE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">f</td><td>)</td>
          <td>&#160;&#160;&#160;((f) &amp; <a class="el" href="group__RecordAccessGroup.html#gaf8c2983be7421191004c22445b5fb1cc">MDBM_STORE_MASK</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract the store mode from an options mask. </p>

</div>
</div>
<a class="anchor" id="ga45c43e56996a24581276b3ccd04afa3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_RESERVE&#160;&#160;&#160;0x100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserve space; Value not copied. </p>

</div>
</div>
<a class="anchor" id="ga88181836324e58ea8e66f66b1800a26d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CLEAN&#160;&#160;&#160;0x200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark entry as clean. </p>

</div>
</div>
<a class="anchor" id="ga38f009e54b07c97f3a38902682416a5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHE_ONLY&#160;&#160;&#160;0x400</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do not operate on the backing store; use cache only. </p>

</div>
</div>
<a class="anchor" id="ga17788287d9b110766368927d4a051ce4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHE_REPLACE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update cache if key exists; insert if does not exist. </p>

</div>
</div>
<a class="anchor" id="gaa52b217cfc373e97859f3d10e4f12e88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHE_MODIFY&#160;&#160;&#160;0x1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update cache if key exists; do not insert if does not. </p>

</div>
</div>
<a class="anchor" id="ga26888c761d8635099b66a2ca4f6ee8f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_CACHE_UPDATE_MODE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">f</td><td>)</td>
          <td>&#160;&#160;&#160;((f) &amp; <a class="el" href="group__RecordAccessGroup.html#gaa52b217cfc373e97859f3d10e4f12e88">MDBM_CACHE_MODIFY</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gac793b2f495b3111f3119cafb0ad5cd2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_STORE_SUCCESS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returned if store succeeds. </p>

</div>
</div>
<a class="anchor" id="ga8948d851ca085369eaf03d4ff0fd163f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDBM_STORE_ENTRY_EXISTS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returned if MDBM_INSERT used and key exists. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga2f22e356fdbd7e77271fb3c38ff2fe84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdatum.html">datum</a> mdbm_fetch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the record specified by the <em>key</em> argument and returns a <em>datum</em> that <b>points</b> to the value. </p>
<p>If such a record exists in the database, the size and location (pointer) are stored in the returned <em>datum</em>. If no matching record exists, a null datum (dsize==0, dptr==NULL) is returned.</p>
<p>The contents returned in <em>datum</em> has a <b>pointer to a value</b> in mapped memory. If there is any system-wide process that could modify your MDBM, this value must be accessed in a locked context.</p>
<p>For example, the following is correct code to copy a lookup value for subsequent return: </p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span>* getFoo(<span class="keywordtype">int</span> maxLength)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="structdatum.html">datum</a> key = { <span class="stringliteral">&quot;foo&quot;</span>, 3 };</div>
<div class="line">  <a class="code" href="structdatum.html">datum</a> value;</div>
<div class="line">  <span class="keywordtype">char</span> *buffer = (<span class="keywordtype">char</span>*)malloc(maxLength+1);  <span class="comment">// Skip return code check.</span></div>
<div class="line">  <a class="code" href="group__LockingGroup.html#ga77f4f19c6c754be1064147a23791486e" title="Locks the database for exclusive access by the caller.">mdbm_lock</a>(db);   <span class="comment">// Skip return code check.</span></div>
<div class="line">  value = <a class="code" href="group__RecordAccessGroup.html#ga2f22e356fdbd7e77271fb3c38ff2fe84" title="Fetches the record specified by the key argument and returns a datum that points to the value...">mdbm_fetch</a>(db, &amp;key);</div>
<div class="line">  <span class="keywordflow">if</span> (value.<a class="code" href="structdatum.html#a10a7341822a7b5b5abd03080ddb6fe9a" title="Pointer to key or value data.">dptr</a> != NULL) {</div>
<div class="line">    strncpy(buffer, value.<a class="code" href="structdatum.html#a10a7341822a7b5b5abd03080ddb6fe9a" title="Pointer to key or value data.">dptr</a>, maxLength);  <span class="comment">// GOOD: copy-out done in locked context.</span></div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    buffer[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">  };</div>
<div class="line">  <a class="code" href="group__LockingGroup.html#ga55d91340c346e3910edeffe990cc199d" title="Unlocks the database, releasing exclusive or shared access by the caller.">mdbm_unlock</a>(db); <span class="comment">// Skip return code check.</span></div>
<div class="line">  <span class="keywordflow">return</span> buffer;</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Lookup key </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>datum is returned with found, or not found, information </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">datum</td><td>found, with size and pointer set, on success </td></tr>
    <tr><td class="paramname">datum</td><td>not found, with dsize==0, and dptr==NULL, and errno==ENOENT. errno may have other values for failure (ex., EINVAL). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga54e09664a3befe2b298a5adc1d5fa188"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_fetch_r </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the record specified by the <em>key</em> argument. </p>
<p>If such a record exists in the database, the size and location (pointer) are stored in the datum pointed to by <em>val</em>. If no matching record exists, a null datum (dsize==0, dptr==NULL) is returned.</p>
<p>The contents returned in <em>val</em> is a <b>pointer to a value</b> in mapped memory. If there is any system-wide process that could modify your MDBM, this value must be accessed in a locked context.</p>
<p>For example, the following is correct code to copy a lookup value for subsequent return: </p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span>* getFoo(<span class="keywordtype">int</span> maxLength)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> rc;</div>
<div class="line">  <a class="code" href="structdatum.html">datum</a> key = { <span class="stringliteral">&quot;foo&quot;</span>, 3 };</div>
<div class="line">  <a class="code" href="structdatum.html">datum</a> value;</div>
<div class="line">  <span class="keywordtype">char</span> *buffer = (<span class="keywordtype">char</span>*)malloc(maxLength+1);  <span class="comment">// Skip return code check.</span></div>
<div class="line">  <a class="code" href="group__LockingGroup.html#ga77f4f19c6c754be1064147a23791486e" title="Locks the database for exclusive access by the caller.">mdbm_lock</a>(db);    <span class="comment">// Skip return code check.</span></div>
<div class="line">  rc = <a class="code" href="group__RecordAccessGroup.html#ga54e09664a3befe2b298a5adc1d5fa188" title="Fetches the record specified by the key argument.">mdbm_fetch_r</a>(db, &amp;key, &amp;value, NULL);</div>
<div class="line">  <span class="keywordflow">if</span> (!rc) {</div>
<div class="line">    strncpy(buffer, value.<a class="code" href="structdatum.html#a10a7341822a7b5b5abd03080ddb6fe9a" title="Pointer to key or value data.">dptr</a>, maxLength);  <span class="comment">// GOOD: copy-out done in locked context.</span></div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    buffer[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">  };</div>
<div class="line">  <a class="code" href="group__LockingGroup.html#ga55d91340c346e3910edeffe990cc199d" title="Unlocks the database, releasing exclusive or shared access by the caller.">mdbm_unlock</a>(db);  <span class="comment">// Skip return code check.</span></div>
<div class="line">  <span class="keywordflow">return</span> buffer;</div>
<div class="line">}</div>
</div><!-- fragment --><p>A record can be updated in-place by fetching the value datum, casting the dptr as appropriate, and updating those contents. However, the update must not change the size of the record.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Pointer to <a class="el" href="structdatum.html">datum</a> used as the index key </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">val</td><td>Pointer to <a class="el" href="structdatum.html">datum</a> returned </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">iter</td><td>MDBM iterator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Fetch status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga45eadc48fed427ebcd0700539d819cea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_fetch_buf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches and copies the record specified by the <em>key</em> argument. </p>
<p>If such a record exists in the database, the size and location are stored in the datum pointed to by val. The same record is also copied into the <em>buf</em> argument. If no matching record exists, a null datum (dsize==0, dptr==NULL) is returned.</p>
<p>Note that a record can be updated in-place by fetching the value datum, casting the dptr as appropriate, and updating the record. However, the update must not change the size of the record.</p>
<p>buf.dptr must point to memory that has been previously malloc'd on the heap. buff.dptr will be realloc'd if is too small.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Lookup key </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">val</td><td>Lookup value (pointer) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>Copy-out of lookup reference returned in <em>val</em> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Reserved for future use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Fetch status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga910f1482d0d119abc810735fc7b4da64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_fetch_dup_r </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the next value for a key inserted via <a class="el" href="group__RecordAccessGroup.html#gac514b009493068b894465480cb81faea">mdbm_store_r</a> with the MDBM_INSERT_DUP flag set. </p>
<p>The order of values returned by iterating via this function is not guaranteed to be the same order as the values were inserted.</p>
<p>As with any db iteration, record insertion and deletion during iteration may cause the iteration to skip and/or repeat records.</p>
<p>Calling this function with an iterator initialized via <a class="el" href="mdbm_8h.html#a6b5914b311071c648fba33df6638783d">MDBM_ITER_INIT</a> will cause this function to return the first value for the given key.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Pointer to <a class="el" href="structdatum.html">datum</a> used as the index key </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">val</td><td>Pointer to <a class="el" href="structdatum.html">datum</a> returned </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">iter</td><td>MDBM iterator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Fetch duplicate status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga112e98430cf64402c17d6cd8463643e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* mdbm_fetch_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Stored key </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Fetched string reference, or NULL </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Pointer</td><td>to string, on success </td></tr>
    <tr><td class="paramname">NULL</td><td>if key does not exist </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1519e82260a884cab27f475e6f292a7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structmdbm__fetch__info.html">mdbm_fetch_info</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdbm__fetch__info.html">mdbm_fetch_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches and copies the record specified by the <em>key</em> argument. </p>
<p>If such a record exists in the database, the size and location are stored in the datum pointed to by val. The same record is also copied into the <em>buf</em> argument. If no matching record exists, a null datum (dsize==0, dptr==NULL) is returned.</p>
<p><a class="el" href="structmdbm__fetch__info.html">mdbm_fetch_info</a> is only supported by MDBM version 3 or higher.</p>
<p>Note that a record can be updated in-place by fetching the value datum, casting the dptr as appropriate, and updating the record. However, the update must not change the size of the record.</p>
<p>Additional information is passed back in the <em>info</em> argument: entry flags, the number of accesses to cache entry, and the last access time (LRU/LFU only).</p>
<p>buf.dptr cannot point to statically allocated memory. It must point to memory that has been previously malloc'd on the heap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Pointer to <a class="el" href="structdatum.html">datum</a> used as the index key </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">val</td><td>Pointer to <a class="el" href="structdatum.html">datum</a> returned </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Copy found <a class="el" href="structdatum.html">datum</a> into this parameter </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">info</td><td>Pointer to additional information (struct <a class="el" href="structmdbm__fetch__info.html">mdbm_fetch_info</a>) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">iter</td><td>MDBM iterator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Fetch info status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga002dad258e05c01136dbabb9e1120790"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a specific record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Key to be removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Delete status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga02b1b289ec41fc7c5a1993be85aebf57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_delete_r </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the record currently addressed by the <em>iter</em> argument. </p>
<p>After deletion, the key and/or value returned by the iterating function is no longer valid. Calling <a class="el" href="group__RecordIterationGroup.html#ga019023e453ea09554ffb944bbfa982ea">mdbm_next_r</a> on the iterator will return the key/value for the entry following the entry that was deleted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">iter</td><td>MDBM iterator pointing to item to be deleted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Delete status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga03a6d4c4ffb314cf5e7dfbf4eb3c67e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_delete_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a string from the MDBM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Stored key </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Delete string status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5107f4235ad6ac1d9d4e73837f41a200"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_store </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a>&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a wrapper around <a class="el" href="group__RecordAccessGroup.html#gac514b009493068b894465480cb81faea">mdbm_store_r</a>, with a static iterator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Stored key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">val</td><td><em>Key's</em> value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Store flags </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Store status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Flag MDBM_INSERT was specified, and the key already exists</td></tr>
  </table>
  </dd>
</dl>
<p>Values for <em>flags</em> mask:</p>
<ul>
<li>MDBM_INSERT - Operation will fail if a record with the same key already exists in the database.</li>
<li>MDBM_REPLACE - A record with the same key will be replaced. If the key does not exist, the record will be created.</li>
<li>MDBM_INSERT_DUP - allows multiple records with the same key to be inserted. Fetching a record with the key will return only one of the duplicate records, and which record is returned is not defined.</li>
<li>MDBM_MODIFY - Store only if matching entry already exists.</li>
<li>MDBM_RESERVE - Reserve space; value not copied (<a class="el" href="group__RecordAccessGroup.html#gac514b009493068b894465480cb81faea">mdbm_store_r</a> only)</li>
<li>MDBM_CACHE_ONLY (MDBM V3) - Perform store only in the Cache, not in Backing Store.</li>
<li>MDBM_CACHE_MODIFY (MDBM V3) - Update Cache only if key exists; update the Backing Store</li>
</ul>
<p>Insertion with flag <em>MDBM_MODIFY</em> set will fail if the key does not already exist.</p>
<p>Insertion with flag <em>MDBM_RESERVE</em> set will allocate space within the MDBM for the object; but will not copy it. The caller is responsible for copying the value into the indicated position.</p>
<p>Replacement with flag <em>MDBM_CACHE_MODIFY</em> for a cache with a backing store, has the effect of writing through the cache to the backing store without updating the cache unless that cache entry already exists.</p>
<p>Quick option summary:</p>
<ul>
<li>MDBM_INSERT - Add if missing, fail if present</li>
<li>MDBM_REPLACE - Add if missing, replace if present</li>
<li>MDBM_MODIFY - Fail if missing, replace if present</li>
</ul>
<p>NOTE: Ensure that the key and value datum pointers reference storage that is external to the db and not the result of, for example, an <a class="el" href="group__RecordAccessGroup.html#ga2f22e356fdbd7e77271fb3c38ff2fe84">mdbm_fetch</a>, <a class="el" href="group__RecordIterationGroup.html#ga129401adcc1687b39c661d932119e958">mdbm_first</a>, or <a class="el" href="group__RecordIterationGroup.html#ga03b3bead08f92a7fa1d05cd31eb5efa7">mdbm_next</a>. A store operation can result in various db internal modifications that invalidate previously returned key and value pointers. Also be aware that mdbm_store_r overwrites key.dptr and val.dptr, so to avoid memory leaks for the case when key.dptr or val.dptr point to malloc-ed or new-ed memory, you should keep a copy of above pointers and deallocate them when done.</p>
<p>NOTE: If you do multiple stores to the same key using MDBM_REPLACE, the corresponding value's location in memory can change after each store. The MDBM_REPLACE flag does not imply that the value will reuse the same location. Even if you store a smaller value for an existing key, it probably won't reuse the existing value's location. In the current implementation, the only time it tries to reuse a value's location is when replacing data with exactly the same size. This internal optimization is subject to change in any future release.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>doc, example MDBM_RESERVE </dd></dl>

</div>
</div>
<a class="anchor" id="gac514b009493068b894465480cb81faea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_store_r </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatum.html">datum</a> *&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#afc5f23618803a043f214270e451b9dc8">MDBM_ITER</a> *&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the record specified by the <em>key</em> and <em>val</em> parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td><a class="el" href="structdatum.html">datum</a> to be used as the index key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">val</td><td><a class="el" href="structdatum.html">datum</a> containing the value to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Type of store operation to be performed. See <a class="el" href="group__RecordAccessGroup.html#ga5107f4235ad6ac1d9d4e73837f41a200">mdbm_store</a> for flag values. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">iter</td><td>MDBM iterator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Store status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Flag MDBM_INSERT was specified, and the key already exists</td></tr>
  </table>
  </dd>
</dl>
<p>See <a class="el" href="group__RecordAccessGroup.html#ga5107f4235ad6ac1d9d4e73837f41a200">mdbm_store</a> for additional usage information. </p>

</div>
</div>
<a class="anchor" id="ga32183f91301d03fab89a170e85538ce4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdbm_store_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdbm_8h.html#a80768aab568ca444688a7a1dba7778cd">MDBM</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a string into the MDBM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">db</td><td>Database handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Key for storage </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">val</td><td>String to store </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Type of store operation to be performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Store status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error, and errno is set </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Flag MDBM_INSERT was specified, and the key already exists</td></tr>
  </table>
  </dd>
</dl>
<p>See <a class="el" href="group__RecordAccessGroup.html#ga5107f4235ad6ac1d9d4e73837f41a200">mdbm_store</a> for additional usage information. </p>

</div>
</div>
</div><!-- contents -->
<!-- doc footer -->
</body>
</html>
